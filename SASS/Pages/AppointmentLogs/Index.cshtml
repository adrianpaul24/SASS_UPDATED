@page
@model SASS.Pages.AppointmentLogs.IndexModel
@using SASS.Models
@{
    ViewData["Title"] = "Appointment Logs";
}

<h2 class="mb-4"><i class="fas fa-calendar-check me-2"></i>Appointment Logs</h2>

<div class="table-responsive">
    <table class="table table-hover align-middle table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Appointment Title</th>
                <th><i class="fas fa-user me-1"></i>Client Name</th>
                <th><i class="fas fa-calendar-alt me-1"></i>Date</th>
                <th><i class="fas fa-clock me-1"></i>Start Time</th>
                <th><i class="fas fa-clock me-1"></i>End Time</th>
                <th><i class="fas fa-cogs me-1"></i>Action</th>
                <th><i class="fas fa-history me-1"></i>Timestamp</th>
                <th><i class="fas fa-user-edit me-1"></i>Changed By</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var log in Model.AppointmentLogsList)
            {
                <tr>
                    <td>@log.Appointment.Title</td>
                    <td>@log.Appointment.Name</td>
                    <td>@log.Appointment.AppointmentDate.ToString("yyyy-MM-dd")</td>
                    <td>@log.Appointment.StartTime.ToString(@"hh\:mm")</td>
                    <td>@log.Appointment.EndTime.ToString(@"hh\:mm")</td>
                    <td>
                        @if (log.Action == "Created")
                        {
                            <span class="badge bg-success"><i class="fas fa-plus me-1"></i>Created</span>
                        }
                        else if (log.Action == "Updated")
                        {
                            <span class="badge bg-warning text-dark"><i class="fas fa-edit me-1"></i>Updated</span>
                        }
                        else if (log.Action == "Deleted")
                        {
                            <span class="badge bg-danger"><i class="fas fa-trash me-1"></i>Deleted</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">@log.Action</span>
                        }
                    </td>
                    <td>@log.Timestamp.ToString("yyyy-MM-dd HH:mm:ss")</td>
                    <td>@log.ChangedByUser?.FirstName @log.ChangedByUser?.LastName</td>
                </tr>
            }
        </tbody>
    </table>
</div>

